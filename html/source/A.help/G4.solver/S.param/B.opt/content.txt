# 参数寻优

EastWave 的参数寻优功能可对自定义变量表中的一个或多个“常规变量“进行优化分析，最终得到满足条件的变量值。    
    
选择菜单**模型 > 参数寻优**或双击工具条**opt**，弹出“参数寻优”对话框如下图所示：    
[image]("image/opt/opt.png","参数寻优对话框")    

参数寻优设置步骤如下：
> + [link]("?.opt_step_1", "确定需要优化的变量名和变量取值范围")
  + [link]("?.opt_step_2", "确定优化目标")
  + [link]("?.opt_step_3", "确定优化算法")
  + [link]("?.opt_step_4", "执行优化")

[anchor](.opt_step_1)
## 确定需要优化的变量名和变量取值范围
在“参数寻优”页中指定需要优化的变量名和优化过程中变量允许的取值范围，输入内容如下：
[block-ref](opt_opt_table)

[anchor](.opt_step_2)
## 确定优化目标
在“目标”页中指定“优化函数”和“优化目标”。    
[image]("image/opt/target.png","参数寻优目标对话框")    
其中：
* “优化函数”可以是软件输出的某个结果，如自动计算透反率模式下输出的透反率系数，也可以是调用输出结果的某个目标函数。    
  更多情况下，通过定义“自定义脚本”，在每次计算后自动后处理返回需要的结果，在优化函数中调用该结果。此用法要求“自定义脚本”最后一行给出需返回的参量，以将该参量的值作为脚本返回值。
* “优化目标”中给出结束优化的条件，即认为满足该条件时认为优化目标已达到。可以填入优化函数的目标值。


[anchor](.opt_step_3)
## 确定优化算法
EastWave 中提供两种常用的优化算法：单纯形算法和混合算法。根据算法的特点，针对不同的寻优问题，应选择合适的算法：
+ 单纯形算法：当满足条件的值集中在一个较小的范围内适用该方法；
+ 混合算法：当满足条件的值分布于多个不同区域时适用该方法。

两种算法中，通常优先考虑单纯形算法，根据人为判断大致确定最优参数的范围。在采用单纯形算法达不到优化效果的情况下，再考虑采用混合算法。优化算法高级设置如图5-30所示：    
[image]("image/opt/advance.png","参数寻优优化算法高级设置")    

各参数对优化速度及结果的影响见下表：
[block-ref](opt_opt_speed_table)

[anchor](.opt_step_4)
## 执行优化
设置完优化参数后，即可启动计算开始循环搜索最优解，计算结束后将在后处理脚本数据树gdata下给出优化后的参数值和优化目标值。关于数据后处理可参看[link]("?", "数据后处理")。

```block:opt_opt_table`endtag1
| 输入项 | 说明 | 备注 |
| 变量名 | 需优化的变量名称，输入变量窗口中已定义的常规变量（非数组变量），每行输入一个变量 |  |
| 最小值 | 优化过程中所在行的变量允许的最小值 |  |
| 最大值 | 优化过程中所在行的变量允许的最大值 |  |
```endtag1


```block:opt_opt_speed_table`endtag1
| 参数类型及名称 | 全局性 | 总消耗时间 | 收敛速度 |
| 单纯形参数 |  |  |  |
| 遗传算法参数 |  |  |  |
```endtag1